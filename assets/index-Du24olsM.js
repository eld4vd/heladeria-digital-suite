import{u as m,j as e}from"./tanstack-vendor-DiYFLyoF.js";import{p as b}from"./index-5lR9YcIV.js";import{u as g}from"./useCategorias-BOFCVa6B.js";import{h,L as u}from"./react-vendor-DKUHWr44.js";import"./ui-vendor-DZ4uu1AI.js";const p=r=>m({queryKey:["producto",r],queryFn:()=>{if(r==null||Number.isNaN(r))throw new Error("ID inválido");return b.getProducto(r)},enabled:r!=null&&!Number.isNaN(r),staleTime:12e4,retry:1,select:s=>({id:s.id,nombre:s.nombre,descripcion:s.descripcion,sabor:s.sabor,precio:Number(s.precio),imagenUrl:s.imagenUrl,categoria:{id:s.categoria?.id??s.categoriaId??null,nombre:s.categoria?.nombre??null}})}),C=()=>{const{id:r}=h(),s=r?Number(r):void 0,{data:a,isLoading:t,error:l,refetch:d}=p(s),{data:i,isLoading:c}=g(),o=a?a.categoria.nombre??i?.byId[a.categoria.id??-1]?.nombre??(c?"Cargando…":""):"";return e.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-6 lg:px-8 py-6 md:py-10",children:[e.jsxs("nav",{className:"text-xs mb-4 flex items-center gap-1 text-gray-500","aria-label":"Breadcrumb",children:[e.jsx(u,{to:"/menu",className:"hover:text-cyan-600 transition-colors",children:"Menú"}),e.jsx("span",{children:"/"}),a?e.jsx("span",{className:"text-gray-700 font-medium truncate max-w-[200px]",title:a.nombre,children:a.nombre}):e.jsx("span",{className:"text-gray-400",children:"Detalle"})]}),t&&e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 animate-pulse",children:[e.jsx("div",{className:"flex-1 aspect-[4/3] bg-slate-200 rounded-xl"}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("div",{className:"h-8 w-2/3 bg-slate-200 rounded"}),e.jsx("div",{className:"h-4 w-1/2 bg-slate-100 rounded"}),e.jsx("div",{className:"h-4 w-5/6 bg-slate-100 rounded"}),e.jsx("div",{className:"h-4 w-4/6 bg-slate-100 rounded"}),e.jsx("div",{className:"h-24 w-full bg-slate-100 rounded"})]})]}),l&&!t&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center space-y-4",children:[e.jsx("p",{className:"text-red-600 font-semibold",children:"No se pudo cargar el producto."}),e.jsx("button",{onClick:()=>d(),className:"px-4 py-2 text-sm bg-cyan-600 text-white rounded-lg shadow hover:bg-cyan-700 transition-all",children:"Reintentar"})]}),a&&!t&&e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 lg:gap-12",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative group rounded-xl overflow-hidden bg-white border border-slate-200 shadow-md",children:[e.jsx("img",{src:a.imagenUrl||"https://placehold.co/800x600/f3f4f6/9ca3af?text=Sin+Imagen",alt:a.nombre,width:800,height:600,loading:"lazy",decoding:"async",className:"w-full h-full object-cover aspect-[4/3] md:aspect-[5/4] lg:aspect-[4/3] transition-transform duration-500 group-hover:scale-105",onError:x=>{x.currentTarget.src="https://placehold.co/800x600/f3f4f6/9ca3af?text=Sin+Imagen"}}),e.jsx("div",{className:"absolute top-3 left-3 flex flex-wrap gap-2",children:o&&e.jsx("span",{className:"px-4 py-1 text-xs font-semibold rounded-lg bg-white/95 backdrop-blur text-cyan-700 border border-white/40 shadow-sm",children:o})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[e.jsxs("header",{className:"space-y-4",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight text-slate-800",children:a.nombre}),e.jsx("p",{className:"text-base leading-relaxed text-slate-600 max-w-prose",children:a.descripcion||"Disfruta de nuestro helado artesanal con textura cremosa y sabor auténtico, preparado con ingredientes cuidadosamente seleccionados."})]}),e.jsxs("section",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 text-sm",children:[e.jsx(n,{label:"Sabor",value:a.sabor}),e.jsx(n,{label:"Precio",value:`Bs ${Number(a.precio).toFixed(2)}`,highlight:!0}),e.jsx(n,{label:"Categoría",value:o||"—"})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsx(f,{variant:"ghost",onClick:()=>window.history.back(),children:"Volver al menú"})})]})]})]})},n=({label:r,value:s,highlight:a})=>{const t="flex flex-col p-3 rounded-lg border text-xs bg-white",l=a?"border-emerald-200 bg-emerald-50":"border-slate-200";return e.jsxs("div",{className:`${t} ${l}`,children:[e.jsx("span",{className:"font-medium text-slate-600 mb-0.5",children:r}),e.jsx("span",{className:`text-sm font-semibold ${a?"text-emerald-700":"text-slate-700"}`,children:s})]})},f=({onClick:r,children:s,variant:a="primary"})=>{const t="px-5 py-2.5 text-sm font-semibold rounded-lg border transition-all hover:shadow-md",l=a==="ghost"?"border-slate-200 text-slate-700 bg-white hover:bg-slate-50":"border-transparent bg-cyan-600 text-white hover:bg-cyan-700";return e.jsx("button",{onClick:r,className:`${t} ${l}`,children:s})};export{C as default};
