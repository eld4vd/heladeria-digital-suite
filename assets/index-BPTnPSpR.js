import{a as j,b as v,j as e,u as k}from"./tanstack-vendor-DiYFLyoF.js";import{r as i}from"./react-vendor-DKUHWr44.js";import{I as h}from"./index-5lR9YcIV.js";import{z as u}from"./ui-vendor-DZ4uu1AI.js";const A=({abierto:g,onCerrar:a})=>{const d=j(),[c,x]=i.useState(""),[b,l]=i.useState(""),n=v({mutationFn:h.createCategoria,onSuccess:()=>{d.invalidateQueries({queryKey:["categorias"]}),x(""),l(""),a(),u.success("Categoría creada con éxito",{style:{background:"#FCE7F3",color:"#BE185D",border:"1px solid #FBCFE8"}})},onError:r=>{u.error(`Error al crear la categoría: ${r.message}`,{style:{background:"#FEE2E2",color:"#991B1B",border:"1px solid #FECACA"}})}}),m=r=>{r.preventDefault();const o=c.trim(),p=b.trim();if(o.length<3){u.error("El nombre debe tener al menos 3 caracteres",{style:{background:"#FEE2E2",color:"#991B1B",border:"1px solid #FECACA"}});return}if(p.length===0){u.error("La descripción no puede estar vacía",{style:{background:"#FEE2E2",color:"#991B1B",border:"1px solid #FECACA"}});return}const t={nombre:o,descripcion:p,activo:!0};n.mutate(t)};return g?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 transition-opacity duration-300",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl w-full max-w-md mx-4 shadow-xl transform transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-pink-600",children:"Agregar Nueva Categoría"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 text-2xl transition-colors duration-200","aria-label":"Cerrar modal",children:"×"})]}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:["Nombre ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c,onChange:r=>x(r.target.value),className:"w-full p-3 bg-pink-50 border border-pink-200 rounded-lg focus:border-pink-500 focus:ring-2 focus:ring-pink-300 transition-all duration-200",required:!0,placeholder:"Ej. Helados Clásicos"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Descripción"}),e.jsx("textarea",{value:b,onChange:r=>l(r.target.value),rows:4,className:"w-full p-3 bg-blue-50 border border-blue-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-300 transition-all duration-200",placeholder:"Ej. Categoría para helados tradicionales"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-5 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:n.isPending,className:"px-5 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-lg hover:from-pink-600 hover:to-purple-600 disabled:opacity-50 transition-all duration-200 font-medium",children:n.isPending?"Guardando...":"Guardar"})]}),n.isError&&e.jsx("div",{className:"mt-4 p-4 bg-red-100 border border-red-300 rounded-lg",children:e.jsxs("p",{className:"text-red-700 text-sm",children:["Error: ",n.error.message]})})]})]})}):null},F=({abierto:g,onCerrar:a,categoria:d})=>{const c=j(),[x,b]=i.useState(d.nombre),[l,n]=i.useState(d.descripcion),[m,r]=i.useState(d.activo),o=v({mutationFn:t=>h.updateCategoria(d.id,t),onSuccess:()=>{c.invalidateQueries({queryKey:["categorias"]}),a(),u.success("Categoría actualizada con éxito",{style:{background:"#FCE7F3",color:"#BE185D",border:"1px solid #FBCFE8"}})},onError:t=>{u.error(`Error al actualizar la categoría: ${t.message}`,{style:{background:"#FEE2E2",color:"#991B1B",border:"1px solid #FECACA"}})}}),p=t=>{if(t.preventDefault(),x.trim().length<3){u.error("El nombre debe tener al menos 3 caracteres",{style:{background:"#FEE2E2",color:"#991B1B",border:"1px solid #FECACA"}});return}if(l.trim().length===0){u.error("La descripción no puede estar vacía",{style:{background:"#FEE2E2",color:"#991B1B",border:"1px solid #FECACA"}});return}o.mutate({nombre:x.trim(),descripcion:l.trim(),activo:m})};return g?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 transition-opacity duration-300",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl w-full max-w-md mx-4 shadow-xl transform transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-pink-600",children:"Editar Categoría"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 text-2xl transition-colors duration-200","aria-label":"Cerrar modal",children:"×"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:["Nombre ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:x,onChange:t=>b(t.target.value),className:"w-full p-3 bg-pink-50 border border-pink-200 rounded-lg focus:border-pink-500 focus:ring-2 focus:ring-pink-300 transition-all duration-200",required:!0,placeholder:"Ej. Helados Clásicos"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Descripción"}),e.jsx("textarea",{value:l,onChange:t=>n(t.target.value),rows:4,className:"w-full p-3 bg-blue-50 border border-blue-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-300 transition-all duration-200",placeholder:"Ej. Categoría para helados tradicionales"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Estado"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"activo",checked:m,onChange:t=>r(t.target.checked),className:"form-checkbox h-5 w-5 text-pink-600"}),e.jsx("label",{htmlFor:"activo",className:"text-gray-700 select-none",children:m?"Activo":"Inactivo"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-5 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:o.isPending,className:"px-5 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-lg hover:from-pink-600 hover:to-purple-600 disabled:opacity-50 transition-all duration-200 font-medium",children:o.isPending?"Guardando...":"Actualizar"})]}),o.isError&&e.jsx("div",{className:"mt-4 p-4 bg-red-100 border border-red-300 rounded-lg",children:e.jsxs("p",{className:"text-red-700 text-sm",children:["Error: ",o.error.message]})})]})]})}):null},D=()=>{const[g,a]=i.useState(!1),[d,c]=i.useState(!1),[x,b]=i.useState(!1),[l,n]=i.useState(null),[m,r]=i.useState(null),o=j(),{data:p,isLoading:t,error:y}=k({queryKey:["categorias"],queryFn:h.getCategorias}),f=v({mutationFn:s=>h.deleteCategoria(s),onSuccess:()=>{o.invalidateQueries({queryKey:["categorias"]}),c(!1)},onError:s=>{alert(`Error al eliminar la categoría: ${s.message}`)}}),N=s=>{n(s),c(!0)},w=s=>{r(s),b(!0)},E=()=>{l!==null&&f.mutate(l)};return t?e.jsx("div",{className:"p-8 text-sm text-slate-500",children:"Cargando categorías..."}):y?e.jsxs("div",{className:"p-6 rounded-[22px] border border-red-200 bg-red-50 text-sm text-red-700 shadow-sm",children:[e.jsx("span",{className:"font-semibold",children:"Error:"})," ",y.message]}):e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 rounded-[28px] border border-slate-200/80 bg-white p-7 lg:p-8 shadow-lg shadow-slate-200/50 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-[0.3em] text-slate-400 leading-none",children:"Catálogo"}),e.jsx("h2",{className:"mt-2.5 text-2xl lg:text-3xl font-bold text-slate-900 tracking-tight",children:"Gestión de categorías"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600 leading-relaxed max-w-2xl",children:"Agrupa los sabores para que el equipo encuentre los helados con rapidez."})]}),e.jsx("button",{onClick:()=>a(!0),className:"inline-flex items-center justify-center rounded-xl bg-gradient-to-br from-indigo-600 to-indigo-700 px-6 py-3 text-sm font-bold text-white shadow-lg shadow-indigo-200/50 transition-all duration-200 hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2",children:"+ Agregar Categoría"})]}),e.jsx("div",{className:"overflow-hidden rounded-[26px] border border-slate-200/80 bg-white shadow-lg shadow-slate-200/50",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{className:"bg-gradient-to-br from-slate-50 to-slate-100/60",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-bold uppercase tracking-[0.25em] text-slate-500",children:"N°"}),e.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-bold uppercase tracking-[0.25em] text-slate-500",children:"Nombre"}),e.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-bold uppercase tracking-[0.25em] text-slate-500",children:"Descripción"}),e.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-bold uppercase tracking-[0.25em] text-slate-500",children:"Estado"}),e.jsx("th",{className:"px-6 py-4 text-left text-[10px] font-bold uppercase tracking-[0.25em] text-slate-500",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 bg-white",children:p?.map((s,C)=>e.jsxs("tr",{className:"transition-all duration-200 hover:bg-slate-50/80",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-slate-700",children:C+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-slate-900",children:s.nombre}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 max-w-md",children:s.descripcion||e.jsx("span",{className:"text-slate-400",children:"Sin descripción"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-3 py-1.5 rounded-full text-xs font-bold shadow-sm ${s.activo?"bg-emerald-100 text-emerald-800 border border-emerald-200":"bg-rose-100 text-rose-800 border border-rose-200"}`,children:s.activo?"Activo":"Inactivo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w(s),className:"rounded-xl border border-slate-200 bg-white px-4 py-2 text-xs font-bold text-slate-700 shadow-sm transition-all duration-200 hover:border-indigo-300 hover:bg-indigo-50 hover:text-indigo-700 hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",children:"Editar"}),e.jsx("button",{onClick:()=>N(s.id),className:"rounded-xl border border-rose-200 bg-white px-4 py-2 text-xs font-bold text-rose-700 shadow-sm transition-all duration-200 hover:bg-rose-50 hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-500",children:"Eliminar"})]})})]},s.id))})]})})}),p?.length===0&&e.jsx("div",{className:"rounded-[26px] border border-slate-200/80 bg-white p-12 text-center shadow-lg shadow-slate-200/50",children:e.jsxs("div",{className:"mx-auto max-w-sm",children:[e.jsx("p",{className:"text-base font-semibold text-slate-700",children:"No hay categorías registradas"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Comienza agregando tu primera categoría para organizar los productos."}),e.jsx("button",{onClick:()=>a(!0),className:"mt-6 inline-flex items-center justify-center rounded-xl bg-gradient-to-br from-indigo-600 to-indigo-700 px-6 py-3 text-sm font-bold text-white shadow-lg shadow-indigo-200/50 transition-all duration-200 hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]",children:"+ Agregar primera categoría"})]})}),e.jsx(A,{abierto:g,onCerrar:()=>a(!1)}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm px-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-[22px] border border-slate-200 bg-white p-7 shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Confirmar Eliminación"}),e.jsx("p",{className:"mt-3 text-sm text-slate-600 leading-relaxed",children:"¿Estás seguro de que quieres eliminar esta categoría? Esta acción no se puede deshacer."}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>c(!1),className:"rounded-xl border border-slate-200 bg-white px-5 py-2.5 text-sm font-bold text-slate-700 shadow-sm transition-all duration-200 hover:bg-slate-50 hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-400",children:"Cancelar"}),e.jsx("button",{onClick:E,className:"rounded-xl bg-gradient-to-br from-rose-600 to-rose-700 px-5 py-2.5 text-sm font-bold text-white shadow-lg shadow-rose-200/50 transition-all duration-200 hover:shadow-xl disabled:opacity-60 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-500",disabled:f.isPending,children:f.isPending?"Eliminando...":"Eliminar"})]})]})}),m&&e.jsx(F,{abierto:x,onCerrar:()=>{b(!1),r(null)},categoria:m})]})};export{D as default};
